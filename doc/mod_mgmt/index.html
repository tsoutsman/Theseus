<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `mod_mgmt` crate."><title>mod_mgmt - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-f40c346f39d9abc1.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="mod_mgmt" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0-nightly (065a1f5df 2023-06-21)" data-search-js="search-95c92dd01058facf.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-190c35055d2a8300.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../mod_mgmt/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../mod_mgmt/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate mod_mgmt</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">mod_mgmt</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/mod_mgmt/lib.rs.html#1-3084">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="parse_nano_core/index.html" title="mod mod_mgmt::parse_nano_core">parse_nano_core</a></div><div class="desc docblock-short">Routines for parsing the <code>nano_core</code>, the fully-linked, already-loaded base kernel image,
in other words, the code that is currently executing.
As such, it performs no loading, but rather just creates metadata that represents
the existing kernel code that was loaded by the bootloader, and adds those functions to the system map.</div></li><li><div class="item-name"><a class="mod" href="replace_nano_core_crates/index.html" title="mod mod_mgmt::replace_nano_core_crates">replace_nano_core_crates</a></div><div class="desc docblock-short">Routines for replacing the crates that comprise the <code>nano_core</code>,
i.e., the base kernel image. </div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AppCrateRef.html" title="struct mod_mgmt::AppCrateRef">AppCrateRef</a></div><div class="desc docblock-short">An application crate that has been loaded into a <code>CrateNamespace</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.CrateNamespace.html" title="struct mod_mgmt::CrateNamespace">CrateNamespace</a></div><div class="desc docblock-short">This struct represents a namespace of crates and their “global” (publicly-visible) symbols.
A crate namespace struct is basically a container around many crates 
that have all been loaded and linked against each other, 
completely separate and in isolation from any other crate namespace 
(although a given crate may be shared across multiple namespaces).</div></li><li><div class="item-name"><a class="struct" href="struct.LoadedCrate.html" title="struct mod_mgmt::LoadedCrate">LoadedCrate</a></div><div class="desc docblock-short">Represents a single crate whose object file has been 
loaded and linked into at least one <code>CrateNamespace</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.LoadedSection.html" title="struct mod_mgmt::LoadedSection">LoadedSection</a></div><div class="desc docblock-short">Represents a section that has been loaded and is part of a <code>LoadedCrate</code>.
The containing <code>SectionType</code> enum determines which type of section it is.</div></li><li><div class="item-name"><a class="struct" href="struct.LoadedSectionInner.html" title="struct mod_mgmt::LoadedSectionInner">LoadedSectionInner</a></div><div class="desc docblock-short">The parts of a <code>LoadedSection</code> that may be mutable, i.e., 
only the parts that could change after a section is initially loaded and linked.</div></li><li><div class="item-name"><a class="struct" href="struct.NamespaceDir.html" title="struct mod_mgmt::NamespaceDir">NamespaceDir</a></div><div class="desc docblock-short">A wrapper around a <code>Directory</code> reference that offers special convenience functions
for getting and inserting crate object files into a directory.</div></li><li><div class="item-name"><a class="struct" href="struct.RelocationEntry.html" title="struct mod_mgmt::RelocationEntry">RelocationEntry</a></div><div class="desc docblock-short">The information necessary to calculate and write a relocation value,
based on a source section and a target section, in which a value 
based on the location of the source section is written somwhere in the target section.</div></li><li><div class="item-name"><a class="struct" href="struct.StrRef.html" title="struct mod_mgmt::StrRef">StrRef</a></div><div class="desc docblock-short">A wrapper around an <code>Arc&lt;str&gt;</code>: an immutable shared reference to a string slice.</div></li><li><div class="item-name"><a class="struct" href="struct.StrongDependency.html" title="struct mod_mgmt::StrongDependency">StrongDependency</a></div><div class="desc docblock-short">A representation that the owner <code>A</code> of (a <code>LoadedSection</code> object containing) this struct
depends on the given <code>section</code> <code>B</code> in this struct.
The dependent section <code>A</code> is not specifically included here;
since it’s the owner of this struct, it’s implicit that it’s the dependent one.</div></li><li><div class="item-name"><a class="struct" href="struct.TlsDataImage.html" title="struct mod_mgmt::TlsDataImage">TlsDataImage</a></div><div class="desc docblock-short">An initialized TLS area data image ready to be used by a new task.</div></li><li><div class="item-name"><a class="struct" href="struct.TlsInitializer.html" title="struct mod_mgmt::TlsInitializer">TlsInitializer</a></div><div class="desc docblock-short">A “factory” that creates Thread-Local Storage (TLS) data images,
which are used to initialize a new <code>Task</code>’s TLS area.</div></li><li><div class="item-name"><a class="struct" href="struct.WeakDependent.html" title="struct mod_mgmt::WeakDependent">WeakDependent</a></div><div class="desc docblock-short">A representation that the <code>section</code> <code>A</code> in this struct
depends on the owner <code>B</code> of (the <code>LoadedSection</code> object containing) this struct. 
The target dependency <code>B</code> is not specifically included here; 
it’s implicitly the owner of this struct.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CrateType.html" title="enum mod_mgmt::CrateType">CrateType</a></div><div class="desc docblock-short">The type of a crate, based on its object file naming convention.
This naming convention is only used for crate object files
that come from <strong>bootloader-provided modules</strong>,
which the Theseus makefile assigns at build time.</div></li><li><div class="item-name"><a class="enum" href="enum.IntoCrateObjectFile.html" title="enum mod_mgmt::IntoCrateObjectFile">IntoCrateObjectFile</a></div><div class="desc docblock-short">A type that can be converted into a crate object file.</div></li><li><div class="item-name"><a class="enum" href="enum.SectionType.html" title="enum mod_mgmt::SectionType">SectionType</a></div><div class="desc docblock-short">The possible types of sections that can be loaded from a crate object file.</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.BSS_SECTION_NAME.html" title="constant mod_mgmt::BSS_SECTION_NAME">BSS_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.CRATE_HASH_DELIMITER.html" title="constant mod_mgmt::CRATE_HASH_DELIMITER">CRATE_HASH_DELIMITER</a></div><div class="desc docblock-short">A crate’s name and its hash are separated by “-”, i.e., “my_crate-hash”.</div></li><li><div class="item-name"><a class="constant" href="constant.DATA_BSS_SECTION_FLAGS.html" title="constant mod_mgmt::DATA_BSS_SECTION_FLAGS">DATA_BSS_SECTION_FLAGS</a></div><div class="desc docblock-short"><code>.data</code> and <code>.bss</code> sections are read-write and non-executable.</div></li><li><div class="item-name"><a class="constant" href="constant.DATA_SECTION_NAME.html" title="constant mod_mgmt::DATA_SECTION_NAME">DATA_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.EH_FRAME_SECTION_NAME.html" title="constant mod_mgmt::EH_FRAME_SECTION_NAME">EH_FRAME_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.EXTRA_FILES_DIRECTORY_NAME.html" title="constant mod_mgmt::EXTRA_FILES_DIRECTORY_NAME">EXTRA_FILES_DIRECTORY_NAME</a></div><div class="desc docblock-short">The name of the directory that contains all other “extra_files” contents.</div></li><li><div class="item-name"><a class="constant" href="constant.GCC_EXCEPT_TABLE_SECTION_NAME.html" title="constant mod_mgmt::GCC_EXCEPT_TABLE_SECTION_NAME">GCC_EXCEPT_TABLE_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.KERNEL_TEXT_ADDR_RANGE.html" title="constant mod_mgmt::KERNEL_TEXT_ADDR_RANGE">KERNEL_TEXT_ADDR_RANGE</a></div><div class="desc docblock-short">The range of virtual addresses from which we allocate pages for executable .text sections.</div></li><li><div class="item-name"><a class="constant" href="constant.MODULE_PREFIX_DELIMITER.html" title="constant mod_mgmt::MODULE_PREFIX_DELIMITER">MODULE_PREFIX_DELIMITER</a></div><div class="desc docblock-short">The Theseus Makefile appends prefixes onto bootloader module names,
which are separated by the “#” character. 
For example, “k#my_crate-hash.o”.</div></li><li><div class="item-name"><a class="constant" href="constant.NAMESPACES_DIRECTORY_NAME.html" title="constant mod_mgmt::NAMESPACES_DIRECTORY_NAME">NAMESPACES_DIRECTORY_NAME</a></div><div class="desc docblock-short">The name of the directory that contains all of the CrateNamespace files.</div></li><li><div class="item-name"><a class="constant" href="constant.RODATA_SECTION_FLAGS.html" title="constant mod_mgmt::RODATA_SECTION_FLAGS">RODATA_SECTION_FLAGS</a></div><div class="desc docblock-short"><code>.rodata</code> sections are read-only and non-executable.</div></li><li><div class="item-name"><a class="constant" href="constant.RODATA_SECTION_NAME.html" title="constant mod_mgmt::RODATA_SECTION_NAME">RODATA_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.SECTION_HASH_DELIMITER.html" title="constant mod_mgmt::SECTION_HASH_DELIMITER">SECTION_HASH_DELIMITER</a></div><div class="desc docblock-short">A section’s demangled name and its hash are separated by “::h”, 
e.g., <code>&quot;my_crate::section_name::h&lt;hash&gt;&quot;</code>.</div></li><li><div class="item-name"><a class="constant" href="constant.TEXT_SECTION_FLAGS.html" title="constant mod_mgmt::TEXT_SECTION_FLAGS">TEXT_SECTION_FLAGS</a></div><div class="desc docblock-short"><code>.text</code> sections are read-only and executable.</div></li><li><div class="item-name"><a class="constant" href="constant.TEXT_SECTION_NAME.html" title="constant mod_mgmt::TEXT_SECTION_NAME">TEXT_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.TLS_BSS_SECTION_NAME.html" title="constant mod_mgmt::TLS_BSS_SECTION_NAME">TLS_BSS_SECTION_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.TLS_DATA_SECTION_NAME.html" title="constant mod_mgmt::TLS_DATA_SECTION_NAME">TLS_DATA_SECTION_NAME</a></div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.crate_name_from_path.html" title="fn mod_mgmt::crate_name_from_path">crate_name_from_path</a></div><div class="desc docblock-short">Returns the crate name that is derived from a crate object file path.</div></li><li><div class="item-name"><a class="fn" href="fn.create_application_namespace.html" title="fn mod_mgmt::create_application_namespace">create_application_namespace</a></div><div class="desc docblock-short">Create a new application <code>CrateNamespace</code> that uses the default application directory 
and is structured atop the given <code>recursive_namespace</code>. 
If no <code>recursive_namespace</code> is provided, the default initial kernel namespace will be used. </div></li><li><div class="item-name"><a class="fn" href="fn.find_symbol_table.html" title="fn mod_mgmt::find_symbol_table">find_symbol_table</a></div><div class="desc docblock-short">Returns a reference to the symbol table in the given <code>ElfFile</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.get_containing_crate_name.html" title="fn mod_mgmt::get_containing_crate_name">get_containing_crate_name</a></div><div class="desc docblock-short">Parses the given symbol string to try to find the name of the parent crate
that contains the symbol. 
Depending on the symbol, there may be multiple potential parent crates;
if so, they are returned in order of likeliness: 
the first crate name in the symbol is most likely to contain it.
If the parent crate cannot be determined (e.g., a <code>no_mangle</code> symbol),
then an empty <code>Vec</code> is returned.</div></li><li><div class="item-name"><a class="fn" href="fn.get_containing_crate_name_ranges.html" title="fn mod_mgmt::get_containing_crate_name_ranges">get_containing_crate_name_ranges</a></div><div class="desc docblock-short">Same as <a href="#get_containing_crate_name"><code>get_containing_crate_name()</code></a>,
but returns the substring <code>Range</code>s of where the parent crate names 
are located in the given <code>demangled_full_symbol</code> string.</div></li><li><div class="item-name"><a class="fn" href="fn.get_initial_kernel_namespace.html" title="fn mod_mgmt::get_initial_kernel_namespace">get_initial_kernel_namespace</a></div><div class="desc docblock-short">Returns a reference to the default kernel namespace, 
which must exist because it contains the initially-loaded kernel crates. 
Returns None if the default namespace hasn’t yet been initialized.</div></li><li><div class="item-name"><a class="fn" href="fn.get_namespaces_directory.html" title="fn mod_mgmt::get_namespaces_directory">get_namespaces_directory</a></div><div class="desc docblock-short">Returns the top-level directory that contains all of the namespaces. </div></li><li><div class="item-name"><a class="fn" href="fn.init.html" title="fn mod_mgmt::init">init</a></div><div class="desc docblock-short">Initializes the module management system based on the bootloader-provided modules, 
and creates and returns the default <code>CrateNamespace</code> for kernel crates.</div></li><li><div class="item-name"><a class="fn" href="fn.is_valid_crate_name_char.html" title="fn mod_mgmt::is_valid_crate_name_char">is_valid_crate_name_char</a></div><div class="desc docblock-short">Crate names must be only alphanumeric characters, an underscore, or a dash.</div></li><li><div class="item-name"><a class="fn" href="fn.replace_containing_crate_name.html" title="fn mod_mgmt::replace_containing_crate_name">replace_containing_crate_name</a></div><div class="desc docblock-short">Replaces the <code>old_crate_name</code> substring in the given <code>demangled_full_symbol</code> with the given <code>new_crate_name</code>, 
if it can be found, and if the parent crate name matches the <code>old_crate_name</code>. 
If the parent crate name can be found but does not match the expected <code>old_crate_name</code>,
then None is returned.</div></li><li><div class="item-name"><a class="fn" href="fn.section_name_str_ref.html" title="fn mod_mgmt::section_name_str_ref">section_name_str_ref</a></div><div class="desc docblock-short">Returns the default name for the given <code>SectionType</code> as a <a href="struct.StrRef.html" title="struct mod_mgmt::StrRef"><code>StrRef</code></a>.</div></li><li><div class="item-name"><a class="fn" href="fn.write_relocation.html" title="fn mod_mgmt::write_relocation">write_relocation</a></div><div class="desc docblock-short">Actually write the value of a relocation entry.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Shndx.html" title="type mod_mgmt::Shndx">Shndx</a></div><div class="desc docblock-short">A Section Header iNDeX (SHNDX), as specified by the ELF format. 
Even though this is typically encoded as a <code>u16</code>,
its decoded form can exceed the max size of <code>u16</code>.</div></li><li><div class="item-name"><a class="type" href="type.StrongCrateRef.html" title="type mod_mgmt::StrongCrateRef">StrongCrateRef</a></div><div class="desc docblock-short">A Strong reference to a <a href="struct.LoadedCrate.html" title="struct mod_mgmt::LoadedCrate"><code>LoadedCrate</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.StrongSectionRef.html" title="type mod_mgmt::StrongSectionRef">StrongSectionRef</a></div><div class="desc docblock-short">A Strong reference (<a href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc"><code>Arc</code></a>) to a <a href="struct.LoadedSection.html" title="struct mod_mgmt::LoadedSection"><code>LoadedSection</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.SymbolMap.html" title="type mod_mgmt::SymbolMap">SymbolMap</a></div><div class="desc docblock-short">A “symbol map” from a fully-qualified demangled symbol String<br />
to weak reference to a <code>LoadedSection</code>.
This is used for relocations, and for looking up function names.</div></li><li><div class="item-name"><a class="type" href="type.WeakCrateRef.html" title="type mod_mgmt::WeakCrateRef">WeakCrateRef</a></div><div class="desc docblock-short">A Weak reference to a <a href="struct.LoadedCrate.html" title="struct mod_mgmt::LoadedCrate"><code>LoadedCrate</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.WeakSectionRef.html" title="type mod_mgmt::WeakSectionRef">WeakSectionRef</a></div><div class="desc docblock-short">A Weak reference (<a href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Weak.html" title="struct alloc::sync::Weak"><code>Weak</code></a>) to a <a href="struct.LoadedSection.html" title="struct mod_mgmt::LoadedSection"><code>LoadedSection</code></a>.</div></li></ul></section></div></main></body></html>